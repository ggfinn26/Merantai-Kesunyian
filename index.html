<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merantai Kesunyian</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="icon" type="image/png" href="assets/2.png">
</head>

<body class="m-0 p-0 bg-white dark:bg-black">
    <header>
        <nav class="flex flex-col items-center bg-white dark:bg-black">
            <div class="flex">
                <img class="justify-center w-20 h-20 hidden dark:inline" src="assets/2.png"
                    alt="logo-merantai-kesunyian">
                <img class="inline justify-center w-20 h-20 dark:hidden" src="assets/Feed Merantai Kesunyian.png"
                    alt="logo-merantai-kesunyian">
            </div>
            <ul id="main-navbar"
                class="flex mx-auto border border-black dark:border-white dark:text-white justify-center">
                <li
                    class="border-r border-black dark:border-white p-2 text-center hover:bg-black hover:text-white cursor-pointer dark:hover:bg-white hover:dark:text-black">
                    <a href="index.html">Home</a>
                </li>
                <li
                    class="border-r border-black dark:border-white p-2 text-center hover:bg-black hover:text-white cursor-pointer dark:hover:bg-white hover:dark:text-black">
                    <a href="about.html">About</a>
                </li>
                <li
                    class="p-2 text-center hover:bg-black hover:text-white cursor-pointer dark:hover:bg-white hover:dark:text-black">
                    <a href="contact.html">Contact</a>
                </li>
            </ul>
        </nav>
    </header>
    <main class="p-5 md:p-20">
        <!-- CBD: Countdown Section -->
        <section id="countdown-section" class="mb-12 text-center">
            <h2 class="font-arual text-2xl md:text-3xl lg:text-4xl dark:text-white mb-6">COUNTDOWN OPEN CALL FOR
                ENTRIES:
            </h2>
            <div id="countdown-timer"
                class="font-renner text-xl md:text-3xl lg:text-5xl dark:text-white border border-black dark:border-white p-6 inline-block">
                Loading...
            </div>
        </section>

        <div id="master-slider">
            <section id="slider-gallery"
                class="relative w-full h-[50vh] md:h-screen overflow-hidden bg-white dark:bg-black h-20">
                <img class="slide-dark absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ease-in-out opacity-100"
                    src="assets/2.png" alt="">
                <img class="slide-light absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ease-in-out opacity-0 dark:hidden"
                    src="assets/Feed Merantai Kesunyian.png" alt="">
                <img class="slide-dark absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ease-in-out opacity-0"
                    src="assets/6.png" alt="">
                <img class="slide-light absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ease-in-out opacity-0"
                    src="assets/6.png" alt="">
                <img class="slide-dark absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ease-in-out opacity-0"
                    src="assets/7.png" alt="">
                <img class="slide-light absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ease-in-out opacity-0"
                    src="assets/7.png" alt="">
                <img class="slide-dark absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ease-in-out opacity-0"
                    src="assets/8.png" alt="">
                <img class="slide-light absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ease-in-out opacity-0"
                    src="assets/8.png" alt="">
                <img class="slide-dark absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ease-in-out opacity-0"
                    src="assets/9.png" alt="">
                <img class="slide-light absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ease-in-out opacity-0"
                    src="assets/9.png" alt="">
                <img class="slide-dark absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ease-in-out opacity-0"
                    src="assets/10.png" alt="">
                <img class="slide-light absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ease-in-out opacity-0"
                    src="assets/10.png" alt="">
                <img class="slide-dark absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ease-in-out opacity-0"
                    src="assets/11.png" alt="">
                <img class="slide-light absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ease-in-out opacity-0"
                    src="assets/11.png" alt="">
            </section>
            <section id="slider-text" class="relative w-full h-[50vh] md:h-screen overflow-hidden">
                <h1
                    class="slide-dark absolute inset-0 flex items-center justify-center text-4xl md:text-6xl text-white transition-opacity duration-1000 ease-in-out opacity-100">
                    Supported By:</h1>
                <h1
                    class="slide-light absolute inset-0 flex items-center justify-center text-4xl md:text-6xl text-black transition-opacity duration-1000 ease-in-out opacity-100 dark:hidden">
                    Supported By:</h1>
            </section>
            <section id="slider-sponsor"
                class="relative w-full h-[50vh] md:h-screen overflow-hidden bg-white dark:bg-black flex items-center justify-center">
                <img class="slide-dark absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 max-w-[50%] max-h-[40%] object-contain transition-opacity duration-1000 ease-in-out opacity-100"
                    src="/assets/logo-danaindonesiana-2.9020d9c.png" alt="">
                <img class="slide-light absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 max-w-[50%] max-h-[40%] object-contain transition-opacity duration-1000 ease-in-out opacity-100 dark:hidden"
                    src="/assets/Logo_Dana_Indonesiana.png" alt="">
                <img class="slide-dark absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 max-w-[50%] max-h-[40%] object-contain transition-opacity duration-1000 ease-in-out opacity-0"
                    src="/assets/logo_kementerian_kebudayaan.png" alt="">
                <img class="slide-light absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 max-w-[50%] max-h-[40%] object-contain transition-opacity duration-1000 ease-in-out opacity-0 dark:hidden"
                    src="/assets/logo_kementerian_kebudayaan.png" alt="">
                <img class="slide-dark absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 max-w-[50%] max-h-[40%] object-contain transition-opacity duration-1000 ease-in-out opacity-0"
                    src="/assets/Logo_resmi_LPDP.png" alt="">
                <img class="slide-light absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 max-w-[50%] max-h-[40%] object-contain transition-opacity duration-1000 ease-in-out opacity-0 dark:hidden"
                    src="/assets/Logo_resmi_LPDP.png" alt="">
            </section>
        </div>
    </main>
    <footer class="bg-white dark:bg-black border-t border-black dark:border-white p-6 mt-8">
        <div class="flex flex-col items-center gap-6">
            <!-- Project Logos -->
            <div class="flex justify-center items-center gap-4">
                <!-- Dark Mode Logos -->
                <img class="h-12 w-auto hidden dark:block" src="assets/2.png" alt="logo-2">
                <img class="h-12 w-auto hidden dark:block" src="assets/1.png" alt="logo-1">

                <!-- Light Mode Logos -->
                <img class="h-12 w-auto dark:hidden" src="assets/Feed Merantai Kesunyian.png" alt="logo-feed">
                <img class="h-12 w-auto dark:hidden" src="assets/Feed Merantai Kesunyian (1).png" alt="logo-feed-1">
            </div>

            <!-- Sponsor Logos -->
            <div class="flex flex-wrap justify-center items-center gap-4">
                <img class="h-8 md:h-10 lg:h-12 w-auto object-contain hidden dark:block"
                    src="assets/logo-danaindonesiana-2.9020d9c.png" alt="logo-danaindonesiana-white">
                <img class="h-8 md:h-10 lg:h-12 w-auto object-contain dark:hidden"
                    src="assets/Logo_Dana_Indonesiana.png" alt="logo-danaindonesiana-black">
                <img class="h-8 md:h-10 lg:h-12 w-auto object-contain" src="assets/logo_kementerian_kebudayaan.png"
                    alt="logo-kementerian-kebudayaan">
                <img class="h-8 md:h-10 lg:h-12 w-auto object-contain" src="assets/Logo_resmi_LPDP.png" alt="logo-lpdp">
            </div>
            <div class="flex flex-col items-center text-center mt-2">
                <h1 class="text-lg font-bold text-black dark:text-white mb-1">Merantai Kesunyian</h1>
                <p class="text-xs text-black dark:text-white font-pencil">© 2025 Merantai Kesunyian. All rights
                    reserved.</p>
            </div>
        </div>
    </footer>
    <script>
        // Supabase config
        const supabaseUrl = 'https://fnltpxqupmjesprihfvr.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZubHRweHF1cG1qZXNwcmloZnZyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5Njk0MDMsImV4cCI6MjA4MTU0NTQwM30.e8sIIvNXS6ndMd6b8GUPsv7g98WGcJKS2rbpMgRYgT0';
        const supabaseClient = window.supabase.createClient(supabaseUrl, supabaseKey);

        // Target Date: December 18, 2025 20:00 WITA (UTC+8)
        const targetDate = new Date("2025-12-18T20:00:00+08:00").getTime();

        const timerElement = document.getElementById("countdown-timer");
        const countdownSection = document.getElementById("countdown-section");

        async function getPendaftarCount() {
            const { count, error } = await supabaseClient
                .from('pendaftar')
                .select('*', { count: 'exact', head: true });

            if (error) {
                console.error('Error fetching count:', error);
                return 0;
            }
            return count || 0;
        }

        function updateNavbar() {
            const navbar = document.getElementById('main-navbar');
            if (!navbar) return;

            navbar.innerHTML = `
                <li class="border-r border-black dark:border-white p-2 text-center hover:bg-black hover:text-white cursor-pointer dark:hover:bg-white hover:dark:text-black">
                    <a href="index.html">Home</a>
                </li>
                <li class="border-r border-black dark:border-white p-2 text-center hover:bg-black hover:text-white cursor-pointer dark:hover:bg-white hover:dark:text-black">
                    <a href="about.html">About</a>
                </li>
                <li class="border-r border-black dark:border-white p-2 text-center hover:bg-black hover:text-white cursor-pointer dark:hover:bg-white hover:dark:text-black">
                    <a href="faq.html">FAQ</a>
                </li>
                <li class="border-r border-black dark:border-white p-2 text-center hover:bg-black hover:text-white cursor-pointer dark:hover:bg-white hover:dark:text-black">
                    <a href="daftar_pertanyaan.html">Daftar</a>
                </li>
                <li class="p-2 text-center hover:bg-black hover:text-white cursor-pointer dark:hover:bg-white hover:dark:text-black">
                    <a href="contact.html">Contact</a>
                </li>
            `;
        }

        async function showOpenCallContent() {
            // Update navbar dulu
            updateNavbar();

            const pendaftarCount = await getPendaftarCount();

            countdownSection.innerHTML = `
                <h2 class="text-2xl md:text-3xl lg:text-4xl dark:text-white mb-6">
                    OPEN CALL FOR ENTRIES TELAH DIBUKA!
                </h2>
                <p class="text-lg md:text-xl dark:text-white mb-6">
                    <span class="font-bold text-2xl md:text-3xl">${pendaftarCount}</span> orang telah mendaftar
                </p>
                <a href="daftar_pertanyaan.html" 
                   class="inline-block px-8 py-4 text-xl md:text-2xl bg-black text-white dark:bg-white dark:text-black border-2 border-black dark:border-white hover:bg-white hover:text-black dark:hover:bg-black dark:hover:text-white transition-colors">
                    DAFTAR SEKARANG →
                </a>
            `;
        }

        function updateCountdown() {
            const now = new Date().getTime();
            const distance = targetDate - now;

            if (distance < 0) {
                // Countdown selesai - tampilkan link pendaftaran dan count
                showOpenCallContent();
                clearInterval(interval);
                return;
            }

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            timerElement.innerText = `${days} Hari : ${hours} Jam : ${minutes} Menit : ${seconds} Detik`;
        }

        const interval = setInterval(updateCountdown, 1000);
        updateCountdown(); // Initial call
    </script>
    <script src="script.js"></script>
</body>

</html>